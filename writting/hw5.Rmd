---
title: "Untitled"
author: "Maelle Coupannec"
date: "26/11/2021"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## LOADING LIBRARY

We are loading some library to clean the data and create the map.

```{r load library}
library(tidyverse)
library(forcats)
library(tigris)
library(viridis)
library(sf)
library(ggthemes)


```

# Reading And Cleaning The Data

First we read the data file which is in the data sub directory of the project file. Using `r fct_lump()` we only keep the three races with the highest number of homicides for that city, the rest are assigned to others and are filtered out. Finally, the disposition factor are reassigned to solved or unsolved for uniformity. 
 

```{r}
homicides <- read_csv("../data/homicide-data.csv")

homicides <- homicides %>%
  unite(col = city_name, c(city, state), sep=", ") %>%
  filter(city_name=="Las Vegas, NV") %>% 
  mutate(victim_race= fct_lump(victim_race, n=3)) %>% 
  filter(!is.na(lon)|!is.na(lon)) %>% 
  filter(victim_race!="Other") %>%
  mutate(disposition=fct_recode(disposition,
                                solved = "Closed by arrest",
                                unsolved = "Closed without arrest", 
                                unsolved ="Open/No arrest"))
  

head(homicides)
```